# 地址欄位顯示對比

## 修改前後對比

### 📋 案件列表卡片

#### ❌ 修改前（錯誤）
```
┌─────────────────────────────────────┐
│ CASE-2025-00003 - wangyouzhi248     │
│ 📍 東區東門里                        │  ← 顯示聯絡地址（錯誤）
│ 水災 | 申請金額: NT$ undefined      │
│                          [待審核]    │
└─────────────────────────────────────┘
```

#### ✅ 修改後（正確）
```
┌─────────────────────────────────────┐
│ CASE-2025-00003 - wangyouzhi248     │
│ 📍 台北市大安區信義路四段1號         │  ← 顯示災損地點（正確）
│ 水災 | 申請金額: NT$ 50,000         │
│                          [待審核]    │
└─────────────────────────────────────┘
```

### 📝 申請表單

#### ❌ 修改前
```
┌─────────────────────────────────────┐
│ 聯絡地址 *                           │  ← 必填（紅色星號）
│ ┌─────────────────────────────────┐ │
│ │ 請輸入完整地址                   │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### ✅ 修改後
```
┌─────────────────────────────────────┐
│ 聯絡地址                             │  ← 選填（無紅色星號）
│ ┌─────────────────────────────────┐ │
│ │ 請輸入完整地址（選填）           │ │
│ └─────────────────────────────────┘ │
│ 💡 如與災損地點不同，請填寫         │  ← 提示文字
└─────────────────────────────────────┘
```

### 📄 案件詳情頁面

#### ❌ 修改前
```
申請人資訊
├─ 姓名：wangyouzhi248
├─ 電話：0912345678
└─ 地址：東區東門里          ← 只顯示一個地址，且標籤不清楚
```

#### ✅ 修改後
```
申請人資訊
├─ 姓名：wangyouzhi248
├─ 電話：0912345678
├─ 聯絡地址：東區東門里      ← 明確標示「聯絡地址」
└─ 災損地點：台北市大安區信義路四段1號  ← 明確標示「災損地點」
```

### 🗺️ 地圖彈出視窗

#### ❌ 修改前
```
┌─────────────────────────────┐
│  CASE-2025-00003            │
│  申請人: wangyouzhi248      │
│  地址: 東區東門里            │  ← 標籤不清楚
│  災害類型: 水災              │
│  申請金額: NT$ undefined     │
│          [待審核]            │
└─────────────────────────────┘
```

#### ✅ 修改後
```
┌─────────────────────────────┐
│  CASE-2025-00003            │
│  申請人: wangyouzhi248      │
│  災損地點: 台北市大安區...   │  ← 標籤明確，顯示正確地址
│  災害類型: 水災              │
│  申請金額: NT$ 50,000        │
│          [待審核]            │
└─────────────────────────────┘
```

## 資料結構對比

### 案件資料
```javascript
// 案件物件結構
{
  "id": "uuid",
  "case_no": "CASE-2025-00003",
  "applicant_name": "wangyouzhi248",
  
  // 兩個地址欄位
  "address": "東區東門里",           // 聯絡地址（選填）
  "damage_location": "台北市大安區信義路四段1號",  // 災損地點（必填）
  
  "disaster_type": "flood",
  "requested_amount": 50000,
  "status": "pending"
}
```

### 顯示邏輯
```javascript
// 優先順序（Fallback 機制）
const displayAddress = 
    app.damage_location ||      // 第一優先：災損地點
    app.address ||              // 第二優先：聯絡地址
    app.formatted_address ||    // 第三優先：格式化地址
    '地址未提供';               // 最後：預設文字
```

## 使用場景

### 場景 1：災損地點與聯絡地址相同
```
災民填寫：
✓ 災損地點：台北市大安區信義路四段1號
✗ 聯絡地址：（不填）

系統顯示：
📍 台北市大安區信義路四段1號
```

### 場景 2：災損地點與聯絡地址不同
```
災民填寫：
✓ 災損地點：台北市大安區信義路四段1號（淹水地點）
✓ 聯絡地址：台北市中山區南京東路二段150號（現居地）

系統顯示：
📍 台北市大安區信義路四段1號
```

### 場景 3：舊資料（只有聯絡地址）
```
舊案件資料：
✗ 災損地點：null
✓ 聯絡地址：東區東門里

系統顯示（Fallback）：
📍 東區東門里
```

## 總結

| 項目 | 修改前 | 修改後 |
|-----|-------|--------|
| 顯示地址 | ❌ 聯絡地址 | ✅ 災損地點 |
| 地址必填 | ❌ 兩個都必填 | ✅ 只災損地點必填 |
| 標籤清晰度 | ❌ 只寫「地址」 | ✅ 明確區分 |
| Fallback | ❌ 無 | ✅ 完整的回退機制 |
| 使用者體驗 | ❌ 重複填寫 | ✅ 簡化流程 |

---
✅ 所有修改已完成並測試通過
