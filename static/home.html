<!-- 災害補助申請平台 Figma 設計首頁 -->
<html lang="zh-TW">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1440">
	<title>災害補助申請平台</title>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
	<style>
		body {
			margin: 0;
			font-family: 'Noto Sans TC', sans-serif;
			background: #F9F7F4;
			color: #14181A;
            
            
		}
			.header {
				width: 100vw;
				min-width: 320px;
				background: transparent;
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 24px 96px;
				box-sizing: border-box;
				/* position: fixed; */
				top: 0;
				left: 0;
				right: 0;
				z-index: 1000;
			}
			body {
				
                position: relative;
                overflow-x: hidden;
			}

            .toy{
            width: 600px;
            height: 600px;
            position: absolute;
            top: -450px;;
            right:-150px;
            background-color: #F3EEE6;
            border-radius: 50%;
            z-index: -1;
        }
			.logo {
				width: 30px;
				height: 40px;
			}
		.header-title {
			display: flex;
			align-items: center;
			gap: 12px;
			font-size: 24px;
			font-weight: 600;
			color: #1E81B2;
		}
		.header-menu {
			display: flex;
			gap: 24px;
			font-size: 20px;
			font-weight: 500;
			color: #3D484D;
			a {
				&:hover {
					color: #1E81B2;
				}
			}
		}
        .main {
            /* width: calc(100vw - 96px); */
            width: 100vw;
            margin: 0 auto;
            margin-top: 48px;
            display: flex;
            flex-direction: column;
            gap: 48px;
            position: relative;
            
        }

        

        .upper{
            margin:0 96px;
            z-index: 10;
        }

        .down{
            margin-left: 48px;
            padding-top: 48px;
            padding-left: 48px;
            padding-right: 96px;
            background-color: #F3EEE6;
            border-radius: 96px 0 0;

        }
        .header-menu a {
            color: #3D484D;
            text-decoration: none;
        }
        
		.section-title {
            font-size: 24px;
            font-weight: 600;
            color: #3D484D;
            /* margin-top: 40px; */
            margin-bottom: 24px;
		}
        .card-row {
            display: flex;
            gap: 24px;
            width: 100%;
            margin-bottom: 32px;
        }
		.card {
			background: #FFFFFF;
			border-radius: 16px;
			padding: 24px;
			/* width: 400px; */
            flex: 1;
            min-width: 300px;
            /* max-width: 400px; */
			box-sizing: border-box;
			display: flex;
			flex-direction: column;
			gap: 12px;
			/* box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.12); */
			transition: all 0.3s ease;
		}
		.card:hover {
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
		}
		.card-title {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 8px;
		}
		.card-icon {
			display: flex;
			align-items: center;
			justify-content: center;
			/* margin-right: 8px; */
            width: 30px;
            height: 30px;
		}
		.card-label {
            background: #D1E9FF;
            color: #1E81B2;
            border-radius: 16px;
            padding: 4px 12px;
            font-size: 12px;
            font-weight: 500;
            margin-left: auto;
		}
		.card-content {
			font-size: 14px;
			color: #64748B;
			margin-bottom: 8px;
			line-height: 1.6;
		}
		.card-date, .card-amount {
			font-size: 14px;
			color: #475569;
			margin-bottom: 4px;
		}
		.card-buttons {
			display: flex;
			gap: 12px;
			margin-top: 12px;
		}
		.card-btn {
			flex: 1;
			border-radius: 8px;
			padding: 10px 16px;
			text-align: center;
			font-size: 14px;
			font-weight: 500;
			cursor: pointer;
			border: none;
			transition: all 0.3s ease;
		}
		.card-btn-primary {
			background: #1E81B2;
			color: #F4F7F7;
		}
		.card-btn-primary:hover {
			background: #166a93;
		}
		.card-btn-primary:disabled {
			background: #94A3B8;
			cursor: not-allowed;
			opacity: 0.6;
		}
		.card-btn-secondary {
			background: #F1F5F9;
			color: #475569;
		}
		.card-btn-secondary:hover {
			background: #E2E8F0;
		}
        .expand-all-btn {
            background: #fff;
            color: black;
            padding: 8px 16px;
            text-align: center;
            font-size: 16px;
            font-weight: 400;
            border: 0px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            &:hover {
                background: black;
                color: #fff;
                border-radius: 8px;
            }
        }
		.indicators {
			display: flex;
			gap: 8px;
			justify-content: center;
			margin: 16px auto;
		}
		.indicator {
			width: 8px;
			height: 8px;
			border-radius: 50%;
			background: #CBD5E1;
		}
		.indicator.selected {
			background:rgb(0, 0, 0);
		}
		/* 登入頁樣式略，依同設計規則 */

        /* 輪播自訂樣式 - 橫向滾動式 */
        .carousel-wrapper {
            position: relative;
            width: 100%;
            margin: 0 auto 0 auto;
        }
        
        .carousel {
            display: flex;
            gap: 24px;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding: 8px 0;
            /* 隱藏滾動條但保持功能 */
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
        }
        
        .carousel::-webkit-scrollbar {
            display: none; /* Chrome/Safari/Opera */
        }
        
        .carousel-card {
            position: relative;
            min-width: 380px;
            max-width: 380px;
            height: 200px;
            border-radius: 16px;
            overflow: hidden;
            /* box-shadow: rgba(17, 17, 26, 0.05) 0px 4px 16px, rgba(17, 17, 26, 0.05) 0px 8px 32px; */
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .carousel-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        
        .carousel-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .carousel-card-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.5), transparent);
            padding: 96px 12px 12px;
            color: #F4F7F7;
        }
        
        .carousel-card-text {
            font-size: 16px;
            font-weight: 500;
            line-height: 24px;
            
        }
        
        /* 輪播箭頭 */
        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 44px;
            height: 44px;
            background: #F4F7F7;
            border: none;
            border-radius: 50%;
            box-shadow: 0 2px 12px rgba(0,0,0,0.15);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #1E81B2;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .carousel-arrow:hover:not(:disabled) {
            background: #1E81B2;
            color: white;
            transform: translateY(-50%) scale(1.1);
        }
        
        .carousel-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .carousel-arrow-left {
            left: -20px;
        }
        
        .carousel-arrow-right {
            right: -20px;
        }
	</style>
</head>
<body>
    
	<div class="header">
		<div class="header-title"><div class="logo"><img src="static/assets/logo.svg" alt="logo" width="100%" height="100%"></div>災害補助申請平台</div>
		<div class="header-menu">
				<a href="/admin">審核人員入口</a>
				<a href="https://welfare.ntpc.gov.tw/viewService/show/22023?fromOpa=1">申請流程</a>
				<a href="/applicant">進度查詢</a>
			</div>
		</div>
		
	<div class="main">
        
		<!-- 即時消息輪播 -->
		<div class="upper">
			<div class="section-title">即時消息</div>
			<div class="carousel-wrapper">
				<button class="carousel-arrow carousel-arrow-left" id="carousel-left-arrow" onclick="scrollCarouselLeft()">
                    <i class="ph ph-caret-left"></i>
                </button>
				<div class="carousel" id="carousel-container">
					<!-- 動態生成輪播卡片 -->
				</div>
				<button class="carousel-arrow carousel-arrow-right" id="carousel-right-arrow" onclick="scrollCarouselRight()">
                    <i class="ph ph-caret-right"></i>
                </button>
			</div>
		</div>

		<div class="toy">
        </div>

		<!-- 災害補助項目 -->
		<div class="down">
			<div class="section-title">災害補助項目</div>
            <div id="all-disaster-cards"></div>
        </div>
	</div>
</body>
<script>
    // 災害補助卡片資料（只保留 6 個）
    const allDisasterCards = [
        {
            title: '淹水救助',
            label: '救濟項目',
            content: '情況：住家因水災受損達50公分以上，且有高度財損之相關證明文件。',
            date: '申請日期：即日起至114年11/12',
            amount: '金額：最高20,000元',
            icon: 'static/assets/淹水救助圖標.png',
        },
        {
            title: '土石流損害救助',
            label: '救濟項目',
            content: '情況：住家因土石流受災達30公分以上，且有高度財損之相關證明文件。',
            date: '申請日期：即日起至114年11/12',
            amount: '金額：最高20,000元',
            icon: 'static/assets/土石流住屋受災救助圖標.png',
        },
        {
            title: '安遷救助',
            label: '救濟項目',
            content: '情況：住家因災不堪居住住，並造遷居或短期居住旅館之住宿。',
            date: '申請日期：即日起至114年11/12',
            amount: '金額：最高20,000元',
            icon: 'static/assets/安遷救助圖標.png',
        },
        {
            title: '重傷救助',
            label: '救濟項目',
            content: '情況：因災受到重傷住院或就醫，且有相關住診證明及醫療費單據。',
            date: '申請日期：即日起至114年11/12',
            amount: '金額：最高100,000元',
            icon: 'static/重傷救助圖標.png',
        },
        {
            title: '失蹤救助',
            label: '救濟項目',
            content: '情況：因災失蹤滿3日以上，經全民眾報案警方或其機構關搜尋。',
            date: '申請日期：即日起至114年11/12',
            amount: '金額：最高20,000元',
            icon: 'static/失蹤救助圖標.png',
        },
        {
            title: '死亡救助',
            label: '救濟項目',
            content: '情況：因災死亡或失蹤滿1年以上，由家屬代提出政府開具之死亡證明。',
            date: '申請日期：即日起至114年11/12',
            amount: '金額：最高200,000元',
            icon: 'static/死亡救助圖標.png',
        },
    ];

    function renderAllDisasterCards() {
        const container = document.getElementById('all-disaster-cards');
        container.innerHTML = '';
        
        // 每 row 3 個，固定顯示 2 rows（6 個卡片）
        const cardsPerRow = 3;
        const maxRows = 2;
        
        for (let row = 0; row < maxRows; row++) {
            const rowDiv = document.createElement('div');
            rowDiv.className = 'card-row';
            
            for (let i = row * cardsPerRow; i < (row + 1) * cardsPerRow && i < allDisasterCards.length; i++) {
                const card = allDisasterCards[i];
                const cardDiv = document.createElement('div');
                cardDiv.className = 'card';
                
                // 只有淹水救助可以點擊申請
                const isAvailable = card.title === '淹水救助';
                const applyBtnDisabled = !isAvailable ? 'disabled' : '';
                const applyBtnClass = isAvailable ? 'card-btn card-btn-primary' : 'card-btn card-btn-primary';
                
                cardDiv.innerHTML = `
                    <div class="card-title">
                        <div class="card-icon"><img src="${card.icon}" alt="icon" width="20" height="20"></div>
                        <div style="font-weight:500;font-size:20px;">${card.title}</div>
                        <div class="card-label">${card.label}</div>
                    </div>
                    <div class="card-content">${card.content}</div>
                    <div class="card-date">${card.date}</div>
                    <div class="card-amount">${card.amount}</div>
                    <div class="card-buttons">
                        <button class="${applyBtnClass}" ${applyBtnDisabled} onclick="${isAvailable ? 'window.location.href=\'/applicant?action=apply\'' : ''}"}>
                            ${isAvailable ? '點擊申請' : '即將開放'}
                        </button>
                        <button class="card-btn card-btn-secondary" onclick="alert('補助詳情功能開發中...')">
                            補助詳情
                        </button>
                    </div>
                `;
                rowDiv.appendChild(cardDiv);
            }
            container.appendChild(rowDiv);
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        renderAllDisasterCards();
        renderCarousel();
        updateArrowStates();
    });

    // 圖片輪播相關 - 橫向滾動式
    const carouselImages = [
        {
            src: 'static/assets/card1.png', 
            text: '協助加速災後重建，受災民眾申請災損證明'
        },
        {
            src: 'static/assets/card2.png', 
            text: '樹倒壓損屋經2機關認定，居交通壅塞處易獲賠'
        },
        {
            src: 'static/assets/card3.jpeg', 
            text: '曾經發路凍貧窮攝影，攝影展募資'
        },
        {
            src: 'static/assets/card4.png', 
            text: '鳳凰颱風蘇澳首名罹難者延誤通報？ 鎮長致歉允檢討改善'
        }, 
        {
            src: 'static/assets/card5.png', 
            text: '災害應變一條龍 打造有韌性的台灣'
        }
    ];

    function renderCarousel() {
        const container = document.getElementById('carousel-container');
        container.innerHTML = '';
        
        carouselImages.forEach((image, index) => {
            const card = document.createElement('div');
            card.className = 'carousel-card';
            card.innerHTML = `
                <img src="${image.src}" alt="${image.text}" />
                <div class="carousel-card-overlay">
                    <div class="carousel-card-text">${image.text}</div>
                </div>
            `;
            container.appendChild(card);
        });

        // 監聽滾動事件以更新箭頭狀態
        container.addEventListener('scroll', updateArrowStates);
    }

    function scrollCarouselLeft() {
        const container = document.getElementById('carousel-container');
        const scrollAmount = 400; // 大約一張卡片的寬度
        container.scrollBy({
            left: -scrollAmount,
            behavior: 'smooth'
        });
        // 延遲更新箭頭狀態，等待滾動完成
        setTimeout(updateArrowStates, 300);
    }

    function scrollCarouselRight() {
        const container = document.getElementById('carousel-container');
        const scrollAmount = 400; // 大約一張卡片的寬度
        container.scrollBy({
            left: scrollAmount,
            behavior: 'smooth'
        });
        // 延遲更新箭頭狀態，等待滾動完成
        setTimeout(updateArrowStates, 300);
    }

    function updateArrowStates() {
        const container = document.getElementById('carousel-container');
        const leftArrow = document.getElementById('carousel-left-arrow');
        const rightArrow = document.getElementById('carousel-right-arrow');
        
        // 檢查是否滾動到最左邊
        const isAtStart = container.scrollLeft <= 5; // 5px 容差
        leftArrow.disabled = isAtStart;
        
        // 檢查是否滾動到最右邊
        const isAtEnd = container.scrollLeft + container.clientWidth >= container.scrollWidth - 5;
        rightArrow.disabled = isAtEnd;
    }

</script>
</html>
